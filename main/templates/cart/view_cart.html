{% extends 'base/base.html' %}
{% load static %}

{% block links %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant:ital,wght@0,300..700;1,300..700&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{% static 'shop/styles/style.css' %}"/>
<link rel="stylesheet" href="{% static 'shop/styles/view_cart.css' %}"/>
{% endblock %}

{% comment %} {% block main %}
<h1>Shopping Cart</h1>
<ul>
    {% for item in cart_items %}
        <li>
            {{ item.product.title }} - ${{ item.product.price }} x {{ item.quantity }}
            <a href="{% url 'shop:remove_from_cart' cart_item_id=item.id %}">Remove</a>
        </li>
    {% endfor %}
</ul>
<p>Total Price: ${{ total_price }}</p>
<a href="{% url 'shop:clear_cart' %}">Clear Cart</a>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
{% endblock %} {% endcomment %}

{% block header %}
{% include 'shop/main-components/header.html' %}
{% endblock %}

{% block main %}
<div class="container">
    <table class="table mt-5 table-bordered table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th>Товар</th>
                <th>Цена</th>
                <th>Количество</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart_items %}
            <tr>
                <td>
                    <a href="{% url 'shop:single_product' item.product.pk %}">{{ item.product.title }}</a>
                </td>
                <td>{{ item.product.price }}</td>
                <td>{{ item.quantity }}</td>
                <td> <a class="btn btn-dark" href="{% url 'shop:remove_from_cart' cart_item_id=item.id %}">Удалить</a> </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="p-2 text-center">
    <p>Сумма: {{ total_price }} ₽</p>
    <a class="btn btn-danger m-3" href="{% url 'shop:clear_cart' %}">Очистить корзину</a>
    <button class="btn btn-warning m-3" type="submit">Купить</button>
</div>

<script src="{% static 'shop/scripts/main.js' %}"></script>
{% endblock %}